diff a/GridDomain.Tests.Acceptance/NodeCommandsTest.cs b/GridDomain.Tests.Acceptance/NodeCommandsTest.cs	(rejected hunks)
@@ -40,15 +40,22 @@ namespace GridDomain.Tests.Acceptance
             TestDbTools.ClearAll(autoTestGridDomainConfiguration);
 
             AkkaConfiguration akkaConf = new AkkaConfiguration("LocalSystem", 8001, "127.0.0.1",AkkaConfiguration.LogVerbosity.Error);
-            GridNode = GreateGridDomainNode(akkaConf);
+            GridNode = GreateGridDomainNode(akkaConf, autoTestGridDomainConfiguration);
 
             GridNode.Start(autoTestGridDomainConfiguration);
             _distributedPubSub = DistributedPubSub.Get(GridNode.System).Mediator;
         }
 
-        protected virtual GridDomainNode GreateGridDomainNode(AkkaConfiguration akkaConf)
+        protected virtual GridDomainNode GreateGridDomainNode(AkkaConfiguration akkaConf, IDbConfiguration dbConfiguration)
         {
-            return new GridDomainNode(new UnityContainer(), new BalanceCommandsRouting(),  ActorSystemFactory.CreateActorSystem(akkaConf));
+            return new GridDomainNode(DefaultUnityContainer(dbConfiguration), new BalanceCommandsRouting(),  ActorSystemFactory.CreateActorSystem(akkaConf));
+        }
+
+        protected static UnityContainer DefaultUnityContainer(IDbConfiguration dbConfiguration)
+        {
+            var unityContainer = new UnityContainer();
+            GridDomain.Balance.Node.CompositionRoot.Init(unityContainer, dbConfiguration);
+            return unityContainer;
         }
 
         protected void ExecuteAndWaitFor<TEvent,TCommand>(TCommand[] commands,
